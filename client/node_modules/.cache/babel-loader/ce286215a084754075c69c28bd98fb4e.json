{"ast":null,"code":"import _classCallCheck from \"/Users/alesio/Documents/CleanSpace/42/chat-app/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/alesio/Documents/CleanSpace/42/chat-app/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/alesio/Documents/CleanSpace/42/chat-app/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/alesio/Documents/CleanSpace/42/chat-app/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/alesio/Documents/CleanSpace/42/chat-app/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/alesio/Documents/CleanSpace/42/chat-app/client/src/components/messages/MessageInput.js\";\nimport React, { Component } from 'react';\n\nvar MessageInput =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(MessageInput, _Component);\n\n  function MessageInput(props) {\n    var _this;\n\n    _classCallCheck(this, MessageInput);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MessageInput).call(this, props));\n\n    _this.handleSubmit = function (e) {\n      e.preventDefault();\n\n      _this.sendMessage();\n\n      _this.setState({\n        message: \"\"\n      });\n    };\n\n    _this.sendMessage = function () {\n      _this.props.sendMessage(_this.state.message);\n    };\n\n    _this.sendTyping = function () {\n      _this.lastUpdateTime = Date.now();\n\n      if (!_this.state.isTyping) {\n        _this.setState({\n          isTyping: true\n        });\n\n        _this.props.sendTyping(true);\n\n        _this.startCheckingTyping();\n      }\n    };\n\n    _this.startCheckingTyping = function () {\n      // console.log(\"Typing\");\n      _this.typingInterval = setInterval(function () {\n        if (Date.now() - _this.lastUpdateTime > 300) {\n          _this.setState({\n            isTyping: false\n          });\n\n          _this.stopCheckingTyping();\n        }\n      }, 300);\n    };\n\n    _this.stopCheckingTyping = function () {\n      // console.log(\"Stop Typing\");\n      if (_this.typingInterval) {\n        clearInterval(_this.typingInterval);\n\n        _this.props.sendTyping(false);\n      }\n    };\n\n    _this.state = {\n      message: \"\",\n      isTyping: false\n    };\n    return _this;\n  }\n\n  _createClass(MessageInput, [{\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.stopCheckingTyping();\n    }\n    /*\n    *\tstartCheckingTyping\n    *\tStart an interval that checks if the user is typing.\n    */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var message = this.state.message;\n      return React.createElement(\"div\", {\n        className: \"type_msg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        onSubmit: this.handleSubmit,\n        className: \"input_msg_write\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        id: \"message\",\n        ref: \"messageinput\",\n        type: \"text\",\n        className: \"write_msg\",\n        value: message,\n        autoComplete: 'off',\n        placeholder: \"Type something interesting\",\n        onKeyUp: function onKeyUp(e) {\n          e.keyCode !== 13 && _this2.sendTyping();\n        },\n        onChange: function onChange(_ref) {\n          var target = _ref.target;\n\n          _this2.setState({\n            message: target.value\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        disabled: message.length < 1,\n        type: \"submit\",\n        className: \"msg_send_btn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        class: \"fa fa-paper-plane-o\",\n        \"aria-hidden\": \"true\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return MessageInput;\n}(Component);\n\nexport { MessageInput as default };","map":{"version":3,"sources":["/Users/alesio/Documents/CleanSpace/42/chat-app/client/src/components/messages/MessageInput.js"],"names":["React","Component","MessageInput","props","handleSubmit","e","preventDefault","sendMessage","setState","message","state","sendTyping","lastUpdateTime","Date","now","isTyping","startCheckingTyping","typingInterval","setInterval","stopCheckingTyping","clearInterval","keyCode","target","value","length"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\n\nexport default class MessageInput extends Component {\n\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            message:\"\",\n            isTyping:false\n        }\n    }\n\n    handleSubmit = (e) => {\n        e.preventDefault()\n        this.sendMessage()\n        this.setState({message:\"\"})\n    }\n\n    sendMessage = () => {\n        this.props.sendMessage(this.state.message)\n    }\n\n    componentWillUnmount() {\n        this.stopCheckingTyping()\n    }\n\n    /*\n\t*\tstartCheckingTyping\n\t*\tStart an interval that checks if the user is typing.\n\t*/\n    sendTyping = () => {\n\t\tthis.lastUpdateTime = Date.now()\n\t\tif(!this.state.isTyping){\n\t\t\tthis.setState({isTyping:true})\n\t\t\tthis.props.sendTyping(true)\n\t\t\tthis.startCheckingTyping()\n        }\n    }\n\n    /*\n\t*\tstartCheckingTyping\n\t*\tStart an interval that checks if the user is typing.\n\t*/\n\tstartCheckingTyping = ()=>{\n\t\t// console.log(\"Typing\");\n\t\tthis.typingInterval = setInterval(() => {\n\t\t\tif((Date.now() - this.lastUpdateTime) > 300){\n\t\t\t\tthis.setState({isTyping:false})\n\t\t\t\tthis.stopCheckingTyping()\n\t\t\t}\n\t\t}, 300)\n    }\n\n    /*\n\t*\tstopCheckingTyping\n\t*\tStart the interval from checking if the user is typing.\n\t*/\n\tstopCheckingTyping = () => {\n\t\t// console.log(\"Stop Typing\");\n\t\tif(this.typingInterval) {\n\t\t\tclearInterval(this.typingInterval)\n\t\t\tthis.props.sendTyping(false)\n\t\t}\n    }\n\n    render() {\n        const {message} = this.state\n        return (\n            <div className=\"type_msg\">\n                <form onSubmit={this.handleSubmit}\n                    className=\"input_msg_write\">\n                    <input id=\"message\"\n                        ref={\"messageinput\"}\n                        type=\"text\"\n                        className=\"write_msg\"\n                        value={message}\n                        autoComplete={'off'}\n                        placeholder=\"Type something interesting\"\n                        onKeyUp={e => {e.keyCode !== 13 && this.sendTyping()}}\n                        onChange={\n                            ({target}) => {\n                                this.setState({message:target.value})\n                            }\n                        } />\n                    <button disabled={message.length < 1}\n                        type=\"submit\"\n                        className=\"msg_send_btn\"><i class=\"fa fa-paper-plane-o\" aria-hidden=\"true\"></i></button>\n                </form>\n            </div>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}