{"ast":null,"code":"import _classCallCheck from \"/Users/nbeny/Documents/chat-app/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/nbeny/Documents/chat-app/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/nbeny/Documents/chat-app/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/nbeny/Documents/chat-app/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/nbeny/Documents/chat-app/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/nbeny/Documents/chat-app/client/src/components/Layout.js\";\nimport React, { Component } from 'react';\nimport io from 'socket.io-client';\nimport { USER_CONNECTED, LOGOUT } from '../Events';\nimport LoginForm from './LoginForm';\nimport ChatContainer from './chats/ChatContainer';\nvar socketUrl = \"localhost:4000\";\n\nvar Layout =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Layout, _Component);\n\n  function Layout(props) {\n    var _this;\n\n    _classCallCheck(this, Layout);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Layout).call(this, props));\n\n    _this.initSocket = function () {\n      var socket = io(socketUrl);\n      socket.on('connect', function () {\n        console.log(\"connected\");\n      });\n\n      _this.setState({\n        socket: socket\n      });\n    };\n\n    _this.setUser = function (user) {\n      var socket = _this.state.socket;\n      socket.emit(USER_CONNECTED, user);\n\n      _this.setState({\n        user: user\n      });\n    };\n\n    _this.logout = function () {\n      var socket = _this.state.socket;\n      socket.emit(LOGOUT);\n\n      _this.setState({\n        user: null\n      });\n    };\n\n    _this.state = {\n      socket: null,\n      user: null\n    };\n    return _this;\n  }\n\n  _createClass(Layout, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.initSocket();\n    }\n    /*\n    *\tConnect to and initializes the socket.\n    */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          socket = _this$state.socket,\n          user = _this$state.user;\n      return React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, !user ? React.createElement(LoginForm, {\n        socket: socket,\n        setUser: this.setUser,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }) : React.createElement(ChatContainer, {\n        socket: socket,\n        user: user,\n        logout: this.logout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return Layout;\n}(Component);\n\nexport { Layout as default };\n;","map":{"version":3,"sources":["/Users/nbeny/Documents/chat-app/client/src/components/Layout.js"],"names":["React","Component","io","USER_CONNECTED","LOGOUT","LoginForm","ChatContainer","socketUrl","Layout","props","initSocket","socket","on","console","log","setState","setUser","user","state","emit","logout"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,EAAP,MAAe,kBAAf;AACA,SAAQC,cAAR,EAAuBC,MAAvB,QAAoC,WAApC;AACA,OAAOC,SAAP,MAAsB,aAAtB;AACA,OAAOC,aAAP,MAA0B,uBAA1B;AAEA,IAAMC,SAAS,GAAG,gBAAlB;;IAEqBC,M;;;;;AAEjB,kBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACf,gFAAMA,KAAN;;AADe,UAgBnBC,UAhBmB,GAgBN,YAAM;AACf,UAAMC,MAAM,GAAGT,EAAE,CAACK,SAAD,CAAjB;AAEAI,MAAAA,MAAM,CAACC,EAAP,CAAU,SAAV,EAAqB,YAAM;AACvBC,QAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;AACH,OAFD;;AAGA,YAAKC,QAAL,CAAc;AAACJ,QAAAA,MAAM,EAANA;AAAD,OAAd;AACH,KAvBkB;;AAAA,UA6BnBK,OA7BmB,GA6BT,UAACC,IAAD,EAAU;AAAA,UACTN,MADS,GACC,MAAKO,KADN,CACTP,MADS;AAEhBA,MAAAA,MAAM,CAACQ,IAAP,CAAYhB,cAAZ,EAA4Bc,IAA5B;;AACA,YAAKF,QAAL,CAAc;AAACE,QAAAA,IAAI,EAAJA;AAAD,OAAd;AACH,KAjCkB;;AAAA,UAsCpBG,MAtCoB,GAsCX,YAAM;AAAA,UACJT,MADI,GACM,MAAKO,KADX,CACJP,MADI;AAEXA,MAAAA,MAAM,CAACQ,IAAP,CAAYf,MAAZ;;AACA,YAAKW,QAAL,CAAc;AAACE,QAAAA,IAAI,EAAC;AAAN,OAAd;AACH,KA1CmB;;AAGf,UAAKC,KAAL,GAAa;AACTP,MAAAA,MAAM,EAAC,IADE;AAETM,MAAAA,IAAI,EAAC;AAFI,KAAb;AAHe;AAOlB;;;;yCAEoB;AACjB,WAAKP,UAAL;AACH;AAEJ;;;;;;6BA+BY;AAAA,wBACkB,KAAKQ,KADvB;AAAA,UACEP,MADF,eACEA,MADF;AAAA,UACUM,IADV,eACUA,IADV;AAEL,aACI;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEQ,CAACA,IAAD,GACA,oBAAC,SAAD;AAAW,QAAA,MAAM,EAAEN,MAAnB;AAA2B,QAAA,OAAO,EAAE,KAAKK,OAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADA,GAGA,oBAAC,aAAD;AAAe,QAAA,MAAM,EAAEL,MAAvB;AAA+B,QAAA,IAAI,EAAEM,IAArC;AAA2C,QAAA,MAAM,EAAE,KAAKG,MAAxD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QALR,CADJ;AAUH;;;;EA1D+BnB,S;;SAAfO,M;AA2DpB","sourcesContent":["import React, { Component } from 'react'\nimport io from 'socket.io-client'\nimport {USER_CONNECTED,LOGOUT} from '../Events'\nimport LoginForm from './LoginForm'\nimport ChatContainer from './chats/ChatContainer'\n\nconst socketUrl = \"localhost:4000\"\n\nexport default class Layout extends Component {\n\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            socket:null,\n            user:null\n        }\n    };\n\n    componentWillMount() {\n        this.initSocket()\n    }\n\n\t/*\n\t*\tConnect to and initializes the socket.\n\t*/\n    initSocket = () => {\n        const socket = io(socketUrl)\n        \n        socket.on('connect', () => {\n            console.log(\"connected\")\n        })\n        this.setState({socket})\n    };\n\n\t/*\n\t* \tSets the user property in state \n\t*\t@param user {id:number, name:string}\n\t*/\n    setUser = (user) => {\n        const {socket} = this.state\n        socket.emit(USER_CONNECTED, user)\n        this.setState({user})\n    };\n\n\t/*\n\t*\tSets the user property in state to null.\n\t*/\n   logout = () => {\n       const {socket} = this.state\n       socket.emit(LOGOUT)\n       this.setState({user:null})\n   }\n\n    render() {\n        const {socket, user} = this.state\n        return (\n            <div className=\"container\">\n                {\n                    !user ?\n                    <LoginForm socket={socket} setUser={this.setUser} />\n                    :\n                    <ChatContainer socket={socket} user={user} logout={this.logout} />\n                }\n            </div>\n        )\n    }\n};\n"]},"metadata":{},"sourceType":"module"}